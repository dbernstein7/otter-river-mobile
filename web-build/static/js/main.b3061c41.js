(()=>{"use strict";var e={8619:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var n=r(296),o=r(6665),a=r(3701),i=r(6283),s=r(3929),u=r(6725),c=r(7225),l=r(5458),d=r(6338),f=r(397),h={rock:{geometry:new d.DodecahedronGeometry(1,0),color:8421504,scale:1,probability:.6},log:{geometry:new d.CylinderGeometry(.5,.5,4,8),color:9127187,scale:1,probability:.4}},p={normal:{geometry:new d.ConeGeometry(.5,2,8),color:16766720,scale:1,speed:1,points:1,probability:.7},rare:{geometry:new d.ConeGeometry(.5,2,8),color:16738740,scale:1.2,speed:1.2,points:3,probability:.3}};const m=function(){var e=(0,o.useRef)(null),t=(0,o.useState)(0),r=(0,n.default)(t,2),a=r[0],i=r[1],s=(0,o.useState)(3),u=(0,n.default)(s,2),c=u[0],m=u[1],v=(0,o.useState)(1),w=(0,n.default)(v,2),g=w[0],y=w[1],x=(0,o.useState)(!1),b=(0,n.default)(x,2),M=b[0],S=b[1],j=(0,o.useState)(!1),k=(0,n.default)(j,2),C=k[0],z=k[1],I=(0,o.useState)(""),D=(0,n.default)(I,2),P=D[0],R=D[1],A=(0,o.useState)(function(){try{return JSON.parse(localStorage.getItem("otterRiverLeaderboard")||"[]")}catch(e){return[]}}()),E=(0,n.default)(A,2),L=E[0],O=E[1],G=(0,o.useState)(0),B=(0,n.default)(G,2),T=B[0],W=B[1],F=(0,o.useRef)(null),U=(0,o.useRef)(null),H=(0,o.useRef)(null),N=(0,o.useRef)(null),_=(0,o.useRef)(null),X=(0,o.useRef)([]),J=(0,o.useRef)([]),V=(0,o.useRef)(0),Y=(0,o.useRef)(0),q=(0,o.useRef)(0),K=(0,o.useRef)(null),Q=(0,o.useRef)(.2),Z=(0,o.useRef)(300),$=(0,o.useRef)(300),ee=(0,o.useRef)(null),te=(0,o.useRef)({ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,w:!1,a:!1,s:!1,d:!1}),re=(0,o.useState)({x:0,y:0}),ne=(0,n.default)(re,2),oe=ne[0],ae=ne[1],ie=(0,o.useState)(!1),se=(0,n.default)(ie,2),ue=se[0],ce=se[1];(0,o.useEffect)((function(){if(e.current){var t=new d.Scene;t.background=new d.Color(8900331),t.fog=new d.Fog(8900331,20,100),F.current=t;var r=new d.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);r.position.set(0,5,10),r.lookAt(0,0,-10),U.current=r,t.add(r);var n=new d.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance"});n.setPixelRatio(1),n.setSize(window.innerWidth,window.innerHeight),n.shadowMap.enabled=!0,n.shadowMap.type=d.PCFSoftShadowMap,H.current=n,e.current.appendChild(n.domElement);var o=function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0];ae({x:t.clientX,y:t.clientY}),ce(!0)},a=function(e){if(e.preventDefault(),e.stopPropagation(),ue){var t=e.touches[0],r=t.clientX-oe.x,n=t.clientY-oe.y;te.current.ArrowLeft=r<-20,te.current.ArrowRight=r>20,te.current.ArrowUp=n<-20,te.current.ArrowDown=n>20}},i=function(e){e.preventDefault(),e.stopPropagation(),ce(!1),Object.keys(te.current).forEach((function(e){te.current[e]=!1}))};e.current.addEventListener("touchstart",o,{passive:!1}),e.current.addEventListener("touchmove",a,{passive:!1}),e.current.addEventListener("touchend",i,{passive:!1});var s=new d.AmbientLight(16777215,1.5);t.add(s);var u=new d.DirectionalLight(16777215,2);u.position.set(5,15,5),u.castShadow=!0,u.shadow.mapSize.width=1024,u.shadow.mapSize.height=1024,t.add(u),we(),ye(),xe(),window.addEventListener("resize",pe),window.addEventListener("keydown",me),window.addEventListener("keyup",ve);var c=function(){F.current&&U.current&&H.current&&(ee.current=requestAnimationFrame(c),M&&!C&&le(),H.current.render(F.current,U.current))};return c(),function(){window.removeEventListener("resize",pe),window.removeEventListener("keydown",me),window.removeEventListener("keyup",ve),e.current&&(e.current.removeEventListener("touchstart",o),e.current.removeEventListener("touchmove",a),e.current.removeEventListener("touchend",i)),K.current&&clearInterval(K.current),ee.current&&cancelAnimationFrame(ee.current),H.current&&(H.current.dispose(),e.current&&H.current.domElement&&e.current.removeChild(H.current.domElement))}}}),[]);var le=function(){if(M&&!C&&N.current){var e=.2,t=!1,r=N.current.rotation.y;(te.current.ArrowUp||te.current.w)&&(N.current.position.z-=e,r=Math.PI,t=!0),(te.current.ArrowDown||te.current.s)&&(N.current.position.z+=e,r=0,t=!0),(te.current.ArrowLeft||te.current.a)&&(N.current.position.x-=e,r=-Math.PI/2,t=!0),(te.current.ArrowRight||te.current.d)&&(N.current.position.x+=e,r=Math.PI/2,t=!0),t&&(N.current.rotation.y=d.MathUtils.lerp(N.current.rotation.y,r,.2)),N.current.position.x=Math.max(-20,Math.min(20,N.current.position.x)),N.current.position.z=Math.max(-49,Math.min(49,N.current.position.z));var n=Q.current*(1+.15*(g-1));$.current=Math.max(100,Z.current-20*g);var o=Date.now();o-V.current>$.current&&(Se(),Math.random()<.1*g&&Se(),V.current=o),o-Y.current>1500&&(je(),Y.current=o);for(var a=X.current.length-1;a>=0;a--){var i,s=X.current[a];if(s.position.z+=n,s.position.z>10)null==(i=F.current)||i.remove(s),X.current.splice(a,1)}for(var u=J.current.length-1;u>=0;u--){var c,l=J.current[u],f=l.userData.type,h=p[f].speed*n;if(l.position.z+=h,l.position.y=.5+.1*Math.sin(.003*Date.now()+u),l.position.z>10)null==(c=F.current)||c.remove(l),J.current.splice(u,1)}q.current+=1/120,W(q.current),de(),he()}},de=function(){if(M&&!C&&N.current&&F.current){for(var e=F.current,t=X.current.length-1;t>=0;t--){var r=X.current[t];N.current.position.distanceTo(r.position)<1.5&&(m((function(e){return e-1})),e.remove(r),X.current.splice(t,1),c<=1&&fe())}for(var n=J.current.length-1;n>=0;n--){var o=J.current[n];N.current.position.distanceTo(o.position)<1.5&&(i((function(e){return e+1})),e.remove(o),J.current.splice(n,1))}}},fe=function(){z(!0),S(!1),K.current&&clearInterval(K.current)},he=function(){if(M&&!C&&F.current){var e=F.current;if(_.current){for(var t=.001*Date.now(),r=_.current.geometry.attributes.position.array,n=0;n<r.length;n+=3){var o=r[n],a=r[n+2];r[n+1]=.2*Math.sin(.5*o+t)+.2*Math.sin(.5*a+t)}_.current.geometry.attributes.position.needsUpdate=!0,_.current.geometry.computeVertexNormals()}if(e.userData.sunGroup){var i=e.userData.sunGroup;i.rotation.y+=5e-4,i.rotation.z=.05*Math.sin(3e-4*Date.now())}if(e.userData.cloudGroup)e.userData.cloudGroup.children.forEach((function(e){e.position.x+=e.userData.speed,e.position.x>200&&(e.position.x=-200),e.position.y+=.01*Math.sin(.001*Date.now()+e.position.x)}))}},pe=function(){if(U.current&&H.current){var e=window.innerWidth,t=window.innerHeight;U.current.aspect=e/t,U.current.updateProjectionMatrix(),H.current.setSize(e,t),H.current.setPixelRatio(window.devicePixelRatio)}},me=function(e){te.current.hasOwnProperty(e.key)&&(te.current[e.key]=!0)},ve=function(e){te.current.hasOwnProperty(e.key)&&(te.current[e.key]=!1)},we=function(){if(F.current){var e=F.current,t=new d.SphereGeometry(5,32,32),r=new d.MeshBasicMaterial({color:16776960,transparent:!0,opacity:.8}),n=new d.Mesh(t,r);n.position.set(30,30,-50),e.add(n);var o=new d.SphereGeometry(6,32,32),a=new d.MeshBasicMaterial({color:16776960,transparent:!0,opacity:.3}),i=new d.Mesh(o,a);i.position.set(30,30,-50),e.add(i);for(var s=new d.Group,u=new d.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.9,roughness:.8,metalness:.2}),c=0;c<10;c++){var l=ge(u);l.position.set(300*(Math.random()-.5),20+15*Math.random(),-100-200*Math.random()),l.scale.set(1+Math.random(),1+Math.random(),1+Math.random()),l.userData={speed:.02+.03*Math.random(),initialX:l.position.x},s.add(l)}e.add(s),e.userData.sunGroup=n,e.userData.cloudGroup=s}},ge=function(e){for(var t=new d.Group,r=3+Math.floor(3*Math.random()),n=0;n<r;n++){var o=new d.SphereGeometry(1,8,8),a=new d.Mesh(o,e);a.position.set(2*(Math.random()-.5),2*(Math.random()-.5),2*(Math.random()-.5)),a.scale.set(1+Math.random(),1+Math.random(),1+Math.random()),t.add(a)}return t},ye=function(){if(F.current){var e=F.current,t=new d.PlaneGeometry(20,200,20,20),r=new d.MeshStandardMaterial({color:4620980,roughness:.2,metalness:.8,transparent:!0,opacity:.9}),n=new d.Mesh(t,r);n.rotation.x=-Math.PI/2,n.position.z=-100,n.receiveShadow=!0,e.add(n),_.current=n}},xe=function(){if(F.current){var e=F.current,t=new d.CapsuleGeometry(.25,.5,4,8),r=new d.MeshStandardMaterial({color:9127187,roughness:.7,metalness:.2}),n=new d.Mesh(t,r);n.position.set(0,.25,0),n.rotation.y=Math.PI,n.castShadow=!0,e.add(n),N.current=n}},be=function(){M||(i(0),m(3),y(1),W(0),z(!1),S(!0),V.current=Date.now(),Y.current=Date.now(),q.current=0,Q.current=.2,$.current=Z.current,F.current&&(X.current.forEach((function(e){return F.current.remove(e)})),J.current.forEach((function(e){return F.current.remove(e)})),X.current=[],J.current=[]),N.current&&(N.current.position.set(0,.25,0),N.current.rotation.y=Math.PI),K.current&&clearInterval(K.current),K.current=setInterval((function(){y((function(e){return e+1})),Q.current+=.02}),15e3),H.current&&F.current&&U.current&&H.current.render(F.current,U.current))},Me=function(){var e={name:P.trim()||"Anonymous",score:a,level:g,time:Math.round(T)},t=[].concat((0,l.default)(L),[e]).sort((function(e,t){return t.score-e.score})).slice(0,10);O(t),localStorage.setItem("otterRiverLeaderboard",JSON.stringify(t)),R("")},Se=function(){if(M&&!C&&F.current){var e=Math.random(),t=0,r="rock";for(var o of Object.entries(h)){var a=(0,n.default)(o,2),i=a[0];if(e<=(t+=a[1].probability)){r=i;break}}var s=h[r],u=new d.Mesh(s.geometry,new d.MeshStandardMaterial({color:s.color,roughness:.8,metalness:.2}));u.position.x=40*(Math.random()-.5),u.position.y=.5,u.position.z=-60,u.rotation.x=Math.random()*Math.PI,u.rotation.y=Math.random()*Math.PI,u.rotation.z=Math.random()*Math.PI,u.scale.set(s.scale,s.scale,s.scale),u.castShadow=!0,u.userData={type:"obstacle",obstacleType:r},F.current.add(u),X.current.push(u)}},je=function(){if(M&&!C&&F.current){var e=Math.random(),t=0,r="normal";for(var o of Object.entries(p)){var a=(0,n.default)(o,2),i=a[0];if(e<=(t+=a[1].probability)){r=i;break}}var s=p[r],u=new d.Mesh(s.geometry,new d.MeshStandardMaterial({color:s.color,roughness:.3,metalness:.8}));u.position.x=40*(Math.random()-.5),u.position.y=.5,u.position.z=-60,u.rotation.y=Math.PI/2,u.scale.set(s.scale,s.scale,s.scale),u.castShadow=!0,u.userData={type:r,points:s.points},F.current.add(u),J.current.push(u)}};return(0,f.jsxs)("div",{ref:e,style:{width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:"#000",touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none",WebkitTapHighlightColor:"transparent"},className:"game-container",children:[(0,f.jsx)((function(){return(0,f.jsxs)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:M?"none":"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",zIndex:1e3,animation:"fadeIn 0.5s ease-out",touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",WebkitTapHighlightColor:"transparent",overflow:"hidden"},children:[(0,f.jsx)("h1",{style:{fontSize:"2rem",color:"#fff",textShadow:"0 0 10px rgba(255, 255, 255, 0.5)",marginBottom:"2rem",animation:"glow 2s infinite alternate",textAlign:"center",padding:"0 20px"},children:"Otter Adventure"}),(0,f.jsx)("button",{id:"startGame",name:"startGame",onClick:be,onTouchStart:function(e){e.preventDefault(),e.stopPropagation(),be()},style:{padding:"1rem 2rem",fontSize:"1.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"50px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 0 20px rgba(76, 175, 80, 0.3)",animation:"fadeIn 0.5s ease-out 0.3s both",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",minWidth:"200px",minHeight:"60px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 20px",position:"relative",zIndex:1001},className:"start-button",children:"Start Adventure"}),(0,f.jsxs)("div",{style:{marginTop:"2rem",color:"#fff",textAlign:"center",maxWidth:"600px",animation:"fadeIn 0.5s ease-out 0.6s both",padding:"0 20px"},children:[(0,f.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"How to Play"}),(0,f.jsx)("p",{style:{marginBottom:"0.5rem"},children:"Swipe to move the otter"}),(0,f.jsx)("p",{style:{marginBottom:"0.5rem"},children:"Collect fish to earn points"}),(0,f.jsx)("p",{style:{marginBottom:"0.5rem"},children:"Avoid obstacles to stay alive"}),(0,f.jsx)("p",{children:"Complete levels to progress!"})]})]})}),{}),(0,f.jsx)((function(){return(0,f.jsxs)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:C?"flex":"none",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",zIndex:1e3,animation:"fadeIn 0.5s ease-out"},children:[(0,f.jsx)("h1",{style:{fontSize:"3rem",color:"#fff",marginBottom:"1rem",animation:"glow 2s infinite alternate"},children:"Game Over"}),(0,f.jsxs)("p",{style:{fontSize:"1.5rem",color:"#fff",marginBottom:"2rem",animation:"fadeIn 0.5s ease-out 0.3s both"},children:["Final Score: ",a]}),(0,f.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",animation:"fadeIn 0.5s ease-out 0.6s both"},children:[(0,f.jsx)("input",{id:"playerName",name:"playerName",type:"text",value:P,onChange:function(e){return R(e.target.value)},placeholder:"Enter your name",style:{padding:"0.5rem 1rem",fontSize:"1.2rem",borderRadius:"25px",border:"2px solid rgba(255, 0, 255, 0.5)",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",width:"250px",animation:"borderPulse 2s infinite"}}),(0,f.jsx)("button",{id:"submitScore",name:"submitScore",onClick:Me,style:{padding:"0.8rem 1.5rem",fontSize:"1.2rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"25px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 0 20px rgba(76, 175, 80, 0.3)"},className:"start-button",children:"Submit Score"})]}),(0,f.jsxs)("div",{style:{marginTop:"2rem",color:"#fff",textAlign:"center",animation:"fadeIn 0.5s ease-out 0.9s both"},children:[(0,f.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Leaderboard"}),L.map((function(e,t){return(0,f.jsxs)("div",{style:{marginBottom:"0.5rem",fontSize:"1.2rem",color:0===t?"#FFD700":"#fff"},children:[e.name,": ",e.score]},t)}))]})]})}),{}),(0,f.jsx)((function(){return(0,f.jsxs)("div",{style:{position:"absolute",top:"20px",left:"20px",color:"#fff",fontSize:"1.2rem",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)",zIndex:100,animation:"fadeIn 0.5s ease-out"},children:[(0,f.jsxs)("div",{style:{marginBottom:"0.5rem"},children:["Score: ",a]}),(0,f.jsxs)("div",{style:{marginBottom:"0.5rem"},children:["Lives: ",c]}),(0,f.jsxs)("div",{style:{marginBottom:"0.5rem"},children:["Level: ",g]}),(0,f.jsxs)("div",{children:["Time: ",Math.floor(T/60),":",Math.floor(T%60).toString().padStart(2,"0")]})]})}),{})]})};function v(){var e=(0,o.useState)({width:u.default.get("window").width,height:u.default.get("window").height}),t=(0,n.default)(e,2),r=t[0],a=t[1];return(0,o.useEffect)((function(){var e=u.default.addEventListener("change",(function(e){var t=e.window;a({width:t.width,height:t.height})}));return function(){return null==e?void 0:e.remove()}}),[]),(0,f.jsxs)(s.default,{style:[w.container,{width:r.width,height:r.height}],children:[(0,f.jsx)(i.default,{style:w.title,children:"Otter River Adventure"}),(0,f.jsx)(i.default,{style:w.subtitle,children:"Mobile Version"}),(0,f.jsx)(s.default,{style:w.gameContainer,children:(0,f.jsx)(m,{})}),(0,f.jsx)(c.StatusBar,{style:"auto"})]})}var w=a.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:10},subtitle:{fontSize:18,color:"#666",marginBottom:20},gameContainer:{width:"100%",height:"70%",backgroundColor:"#f0f0f0",justifyContent:"center",alignItems:"center"}})}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.m=e,(()=>{var e=[];r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,o,a]=e[l],s=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,a<i&&(i=a));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,o,a]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,s,u]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(l)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[546],(()=>r(6387)));n=r.O(n)})();
//# sourceMappingURL=main.b3061c41.js.map