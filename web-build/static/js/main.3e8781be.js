(()=>{"use strict";var e={8619:(e,r,t)=>{t.r(r),t.d(r,{default:()=>v});var n=t(296),o=t(6665),i=t(3701),a=t(6283),s=t(3929),u=t(6725),c=t(7225),d=t(5458),l=t(467),h=t(3913),p=t(397),f={rock:{geometry:new h.DodecahedronGeometry(1,0),color:8421504,scale:1,probability:.6},log:{geometry:new h.CylinderGeometry(.5,.5,4,8),color:9127187,scale:1,probability:.4}},m={normal:{geometry:new h.ConeGeometry(.5,2,8),color:16766720,scale:1,speed:1,points:1,probability:.7},rare:{geometry:new h.ConeGeometry(.5,2,8),color:16738740,scale:1.2,speed:1.2,points:3,probability:.3}};const w=function(){var e=(0,o.useRef)(null),r=(0,o.useState)(0),t=(0,n.default)(r,2),i=t[0],a=t[1],s=(0,o.useState)(3),u=(0,n.default)(s,2),c=u[0],w=u[1],v=(0,o.useState)(1),g=(0,n.default)(v,2),y=g[0],x=g[1],b=(0,o.useState)(!1),M=(0,n.default)(b,2),S=M[0],j=M[1],z=(0,o.useState)(!1),C=(0,n.default)(z,2),k=C[0],R=C[1],A=(0,o.useState)(""),D=(0,n.default)(A,2),L=D[0],E=D[1],P=(0,o.useState)(function(){try{return JSON.parse(localStorage.getItem("otterRiverLeaderboard")||"[]")}catch(e){return[]}}()),I=(0,n.default)(P,2),O=I[0],G=I[1],B=(0,o.useState)(0),W=(0,n.default)(B,2),F=W[0],T=W[1],H=(0,o.useRef)(null),N=(0,o.useRef)(null),U=(0,o.useRef)(null),_=(0,o.useRef)(null),q=(0,o.useRef)(null),J=(0,o.useRef)([]),V=(0,o.useRef)([]),K=(0,o.useRef)(0),X=(0,o.useRef)(0),Q=(0,o.useRef)(0),Y=(0,o.useRef)(null),Z=(0,o.useRef)(.2),$=(0,o.useRef)(300),ee=(0,o.useRef)(300),re=(0,o.useRef)({ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,w:!1,a:!1,s:!1,d:!1}),te=function(){if(S&&!k&&H.current){var e=Math.random(),r=0,t="rock";for(var o of Object.entries(f)){var i=(0,n.default)(o,2),a=i[0];if(e<=(r+=i[1].probability)){t=a;break}}var s=f[t],u=new h.Mesh(s.geometry,new h.MeshStandardMaterial({color:s.color,roughness:.8,metalness:.2}));u.position.x=40*(Math.random()-.5),u.position.y=.5,u.position.z=-60,u.rotation.x=Math.random()*Math.PI,u.rotation.y=Math.random()*Math.PI,u.rotation.z=Math.random()*Math.PI,u.scale.set(s.scale,s.scale,s.scale),u.castShadow=!0,u.userData={type:"obstacle",obstacleType:t},H.current.add(u),J.current.push(u)}},ne=function(){if(!S&&(j(!0),R(!1),K.current=Date.now(),X.current=Date.now(),Y.current=setInterval((function(){x((function(e){return e+1})),Z.current+=.02}),15e3),!H.current||!N.current||!U.current)){var r=function(){var r=(0,l.default)((function*(){try{var r=document.createElement("div");r.id="game-container",r.style.width="100%",r.style.height="100%",e.current.appendChild(r);var t=new h.Scene;t.background=new h.Color(8900331),t.fog=new h.Fog(8900331,20,100),H.current=t;var n=new h.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,15,20),n.lookAt(0,0,-100),N.current=n,t.add(n);var o=new h.WebGLRenderer({antialias:!0});o.setSize(window.innerWidth,window.innerHeight),o.shadowMap.enabled=!0,o.shadowMap.type=h.PCFSoftShadowMap,U.current=o,r.appendChild(o.domElement);var i=new h.AmbientLight(16777215,.5);t.add(i);var a=new h.DirectionalLight(16777215,.8);a.position.set(5,5,5),a.castShadow=!0,a.shadow.mapSize.width=2048,a.shadow.mapSize.height=2048,t.add(a),me(),ve(),ge(),window.addEventListener("resize",de),window.addEventListener("keydown",le),window.addEventListener("keyup",he),fe()}catch(s){console.error("Error initializing game:",s)}}));return function(){return r.apply(this,arguments)}}();r()}},oe=function(){H.current&&(J.current.forEach((function(e){return H.current.remove(e)})),V.current.forEach((function(e){return H.current.remove(e)}))),Y.current&&clearInterval(Y.current),pe(),R(!1),ne()},ie=function(){var e={name:L.trim()||"Anonymous",score:i,level:y,time:Math.round(F)},r=[].concat((0,d.default)(O),[e]).sort((function(e,r){return r.score-e.score})).slice(0,10);G(r),localStorage.setItem("otterRiverLeaderboard",JSON.stringify(r)),E("")};(0,o.useEffect)((function(){if(e.current&&!S){var r=function(){var r=(0,l.default)((function*(){try{var r=document.createElement("div");r.id="game-container",r.style.width="100%",r.style.height="100%",e.current.appendChild(r);var t=new h.Scene;t.background=new h.Color(8900331),t.fog=new h.Fog(8900331,20,100),H.current=t;var n=new h.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,15,20),n.lookAt(0,0,-100),N.current=n,t.add(n);var o=new h.WebGLRenderer({antialias:!0});o.setSize(window.innerWidth,window.innerHeight),o.shadowMap.enabled=!0,o.shadowMap.type=h.PCFSoftShadowMap,U.current=o,r.appendChild(o.domElement);var i=new h.AmbientLight(16777215,.5);t.add(i);var a=new h.DirectionalLight(16777215,.8);a.position.set(5,5,5),a.castShadow=!0,a.shadow.mapSize.width=2048,a.shadow.mapSize.height=2048,t.add(a),me(),ve(),ge(),window.addEventListener("resize",de),window.addEventListener("keydown",le),window.addEventListener("keyup",he),pe(),fe()}catch(s){console.error("Error initializing game:",s)}}));return function(){return r.apply(this,arguments)}}();return r(),function(){if(window.removeEventListener("resize",de),window.removeEventListener("keydown",le),window.removeEventListener("keyup",he),Y.current&&clearInterval(Y.current),e.current){var r=e.current.querySelector("#game-container");r&&e.current.removeChild(r)}U.current&&U.current.dispose()}}}),[S]);var ae=function(){if(S&&!k&&_.current){var e=.2,r=!1,t=_.current.rotation.y;(re.current.ArrowUp||re.current.w)&&(_.current.position.z-=e,t=Math.PI,r=!0),(re.current.ArrowDown||re.current.s)&&(_.current.position.z+=e,t=0,r=!0),(re.current.ArrowLeft||re.current.a)&&(_.current.position.x-=e,t=-Math.PI/2,r=!0),(re.current.ArrowRight||re.current.d)&&(_.current.position.x+=e,t=Math.PI/2,r=!0),r&&(_.current.rotation.y=h.MathUtils.lerp(_.current.rotation.y,t,.2)),_.current.position.x=Math.max(-20,Math.min(20,_.current.position.x)),_.current.position.z=Math.max(-49,Math.min(49,_.current.position.z));var o=Z.current*(1+.15*(y-1));ee.current=Math.max(100,$.current-20*y);var i=Date.now();i-K.current>ee.current&&(te(),Math.random()<.1*y&&te(),K.current=i),i-X.current>1500&&(!function(){if(S&&!k&&H.current){var e=Math.random(),r=0,t="normal";for(var o of Object.entries(m)){var i=(0,n.default)(o,2),a=i[0];if(e<=(r+=i[1].probability)){t=a;break}}var s=m[t],u=new h.Mesh(s.geometry,new h.MeshStandardMaterial({color:s.color,roughness:.3,metalness:.8}));u.position.x=40*(Math.random()-.5),u.position.y=.5,u.position.z=-60,u.rotation.y=Math.PI/2,u.scale.set(s.scale,s.scale,s.scale),u.castShadow=!0,u.userData={type:t,points:s.points},H.current.add(u),V.current.push(u)}}(),X.current=i);for(var a=J.current.length-1;a>=0;a--){var s,u=J.current[a];if(u.position.z+=o,u.position.z>10)null==(s=H.current)||s.remove(u),J.current.splice(a,1)}for(var c=V.current.length-1;c>=0;c--){var d,l=V.current[c],p=l.userData.type,f=m[p].speed*o;if(l.position.z+=f,l.position.y=.5+.1*Math.sin(.003*Date.now()+c),l.position.z>10)null==(d=H.current)||d.remove(l),V.current.splice(c,1)}Q.current+=1/120,T(Q.current),se(),ce()}},se=function(){if(S&&!k&&_.current&&H.current){for(var e=H.current,r=J.current.length-1;r>=0;r--){var t=J.current[r];_.current.position.distanceTo(t.position)<1.5&&(w((function(e){return e-1})),e.remove(t),J.current.splice(r,1),c<=1&&ue())}for(var n=V.current.length-1;n>=0;n--){var o=V.current[n];_.current.position.distanceTo(o.position)<1.5&&(a((function(e){return e+1})),e.remove(o),V.current.splice(n,1))}}},ue=function(){R(!0),j(!1),Y.current&&clearInterval(Y.current)},ce=function(){if(S&&!k&&H.current){var e=H.current;if(q.current){for(var r=.001*Date.now(),t=q.current.geometry.attributes.position.array,n=0;n<t.length;n+=3){var o=t[n],i=t[n+2];t[n+1]=.2*Math.sin(.5*o+r)+.2*Math.sin(.5*i+r)}q.current.geometry.attributes.position.needsUpdate=!0,q.current.geometry.computeVertexNormals()}if(e.userData.sunGroup){var a=e.userData.sunGroup;a.rotation.y+=5e-4,a.rotation.z=.05*Math.sin(3e-4*Date.now())}if(e.userData.cloudGroup)e.userData.cloudGroup.children.forEach((function(e){e.position.x+=e.userData.speed,e.position.x>200&&(e.position.x=-200),e.position.y+=.01*Math.sin(.001*Date.now()+e.position.x)}))}},de=function(){if(N.current&&U.current){var e=window.innerWidth,r=window.innerHeight;N.current.aspect=e/r,N.current.updateProjectionMatrix(),U.current.setSize(e,r)}},le=function(e){re.current.hasOwnProperty(e.key)&&(re.current[e.key]=!0)},he=function(e){re.current.hasOwnProperty(e.key)&&(re.current[e.key]=!1)},pe=function(){a(0),w(3),x(1),j(!1),R(!1),J.current=[],V.current=[],K.current=0,X.current=0,Q.current=0,Z.current=.2,ee.current=$.current},fe=function(){H.current&&N.current&&U.current&&(requestAnimationFrame(fe),ae(),U.current.render(H.current,N.current))},me=function(){if(H.current){var e=H.current,r=new h.SphereGeometry(5,32,32),t=new h.MeshBasicMaterial({color:16776960,transparent:!0,opacity:.8}),n=new h.Mesh(r,t);n.position.set(30,30,-50),e.add(n);var o=new h.SphereGeometry(6,32,32),i=new h.MeshBasicMaterial({color:16776960,transparent:!0,opacity:.3}),a=new h.Mesh(o,i);a.position.set(30,30,-50),e.add(a);for(var s=new h.Group,u=new h.MeshStandardMaterial({color:16777215,transparent:!0,opacity:.9,roughness:.8,metalness:.2}),c=0;c<10;c++){var d=we(u);d.position.set(300*(Math.random()-.5),20+15*Math.random(),-100-200*Math.random()),d.scale.set(1+Math.random(),1+Math.random(),1+Math.random()),d.userData={speed:.02+.03*Math.random(),initialX:d.position.x},s.add(d)}e.add(s),e.userData.sunGroup=n,e.userData.cloudGroup=s}},we=function(e){for(var r=new h.Group,t=3+Math.floor(3*Math.random()),n=0;n<t;n++){var o=new h.SphereGeometry(1,8,8),i=new h.Mesh(o,e);i.position.set(2*(Math.random()-.5),2*(Math.random()-.5),2*(Math.random()-.5)),i.scale.set(1+Math.random(),1+Math.random(),1+Math.random()),r.add(i)}return r},ve=function(){if(H.current){var e=H.current,r=new h.PlaneGeometry(100,1e3,20,20),t=new h.MeshStandardMaterial({color:4620980,roughness:.2,metalness:.8,transparent:!0,opacity:.8}),n=new h.Mesh(r,t);n.rotation.x=-Math.PI/2,n.position.z=-500,n.receiveShadow=!0,e.add(n),q.current=n}},ge=function(){if(H.current){var e=H.current,r=new h.CapsuleGeometry(.5,1,4,8),t=new h.MeshStandardMaterial({color:9127187,roughness:.7,metalness:.2}),n=new h.Mesh(r,t);n.position.set(0,.25,0),n.rotation.y=Math.PI,n.castShadow=!0,e.add(n),_.current=n}};return(0,p.jsxs)("div",{ref:e,style:{width:"100%",height:"100%",position:"relative",overflow:"hidden",backgroundColor:"#000"},children:[(0,p.jsx)((function(){return(0,p.jsxs)("div",{className:"overlay",style:{display:S?"none":"flex",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",textAlign:"center"},children:[(0,p.jsx)("h2",{style:{fontSize:"2.5em",marginBottom:"20px"},children:"Otter River Adventure"}),(0,p.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)",padding:"20px",borderRadius:"10px",marginBottom:"20px",maxWidth:"600px"},children:[(0,p.jsx)("h3",{style:{fontSize:"1.5em",marginBottom:"10px"},children:"How to Play"}),(0,p.jsxs)("ul",{style:{textAlign:"left",listStyleType:"none",padding:0},children:[(0,p.jsx)("li",{style:{margin:"10px 0"},children:"\u2022 Use WASD or Arrow Keys to move"}),(0,p.jsx)("li",{style:{margin:"10px 0"},children:"\u2022 Collect fish while avoiding obstacles"}),(0,p.jsx)("li",{style:{margin:"10px 0"},children:"\u2022 Game speeds up as you level up"}),(0,p.jsx)("li",{style:{margin:"10px 0"},children:"\u2022 Rarer fish appear at higher levels"})]})]}),(0,p.jsx)("button",{onClick:ne,style:{padding:"15px 30px",fontSize:"1.2em",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginBottom:"20px",transition:"background-color 0.3s"},children:"Start Adventure"}),(0,p.jsxs)("div",{style:{maxWidth:"600px",width:"100%"},children:[(0,p.jsx)("h3",{style:{fontSize:"1.5em",marginBottom:"10px"},children:"Leaderboard"}),(0,p.jsx)("ol",{style:{textAlign:"left",padding:"0 20px"},children:O.slice(0,5).map((function(e,r){return(0,p.jsxs)("li",{style:{margin:"10px 0"},children:[e.name,": ",e.score," pts, Level ",e.level,", Time ",e.time]},r)}))})]})]})}),{}),(0,p.jsx)((function(){return(0,p.jsxs)("div",{className:"overlay",style:{display:k?"flex":"none",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",textAlign:"center"},children:[(0,p.jsx)("h2",{style:{fontSize:"2.5em",marginBottom:"20px"},children:"Game Over"}),(0,p.jsxs)("div",{style:{fontSize:"1.5em",marginBottom:"20px"},children:["Final Score: ",i]}),(0,p.jsx)("input",{type:"text",placeholder:"Enter your name",value:L,onChange:function(e){return E(e.target.value)},style:{padding:"10px",fontSize:"1.2em",margin:"10px",width:"200px",borderRadius:"5px",border:"none"}}),(0,p.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,p.jsx)("button",{onClick:ie,style:{padding:"10px 20px",fontSize:"1.2em",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background-color 0.3s"},children:"Submit Score"}),(0,p.jsx)("button",{onClick:oe,style:{padding:"10px 20px",fontSize:"1.2em",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background-color 0.3s"},children:"Play Again"})]})]})}),{}),(0,p.jsxs)("div",{style:{position:"absolute",top:10,left:10,color:"white",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"10px",borderRadius:"5px",fontSize:"1.2em"},children:[(0,p.jsxs)("div",{children:["Score: ",i]}),(0,p.jsxs)("div",{children:["Lives: ",c]}),(0,p.jsxs)("div",{children:["Level: ",y]}),(0,p.jsxs)("div",{children:["Time: ",Math.floor(F/60),":",Math.floor(F%60).toString().padStart(2,"0")]})]})]})};function v(){var e=(0,o.useState)({width:u.default.get("window").width,height:u.default.get("window").height}),r=(0,n.default)(e,2),t=r[0],i=r[1];return(0,o.useEffect)((function(){var e=u.default.addEventListener("change",(function(e){var r=e.window;i({width:r.width,height:r.height})}));return function(){return null==e?void 0:e.remove()}}),[]),(0,p.jsxs)(s.default,{style:[g.container,{width:t.width,height:t.height}],children:[(0,p.jsx)(a.default,{style:g.title,children:"Otter River Adventure"}),(0,p.jsx)(a.default,{style:g.subtitle,children:"Mobile Version"}),(0,p.jsx)(s.default,{style:g.gameContainer,children:(0,p.jsx)(w,{})}),(0,p.jsx)(c.StatusBar,{style:"auto"})]})}var g=i.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"},title:{fontSize:24,fontWeight:"bold",marginBottom:10},subtitle:{fontSize:18,color:"#666",marginBottom:20},gameContainer:{width:"100%",height:"70%",backgroundColor:"#f0f0f0",justifyContent:"center",alignItems:"center"}})}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n](i,i.exports,t),i.exports}t.m=e,(()=>{var e=[];t.O=(r,n,o,i)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,o,i]=e[d],s=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(t.O).every((e=>t.O[e](n[u])))?n.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(d--,1);var c=o();void 0!==c&&(r=c)}}return r}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,o,i]}})(),t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};t.O.j=r=>0===e[r];var r=(r,n)=>{var o,i,[a,s,u]=n,c=0;if(a.some((r=>0!==e[r]))){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(u)var d=u(t)}for(r&&r(n);c<a.length;c++)i=a[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))})();var n=t.O(void 0,[753],(()=>t(6387)));n=t.O(n)})();
//# sourceMappingURL=main.3e8781be.js.map